{"version":3,"sources":["GameController.js"],"names":["Emiter","require","cc","Class","extends","Component","properties","unitBG","Prefab","unitPrefabs","boardUnit","Node","nodeBG","_boardPosition","_boardUnitArgs","_row","_col","_distance","_maxObj","_canPress","onLoad","instance","addEvent","_startGameFunc","bind","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","instanceBackgroundUnit","_instanceBoardArray","start","event","keyCode","macro","KEY","up","_moveUp","down","_moveDown","left","_moveLeft","right","_moveRight","tween","node","delay","call","instanceRandomUnit","log","unit","instantiate","randX","randY","randomXY","addChild","position","setUnitValue","randomValue","Math","floor","random","rand","i","rowBoard","j","unitPos","v2","push","_clearBoardGame","rowBoardArg","destroyNode","y","x","_moveUnitPosition","index","_crossUnit","getUnitValue","indexX","indexY","temp","moveUnit","direct"],"mappings":"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","file":"GameController.js","sourceRoot":"../../../../../assets/Script/Controller","sourcesContent":["const Emiter = require('Emitter');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        unitBG: cc.Prefab,\n        unitPrefabs: cc.Prefab,\n        boardUnit: cc.Node,\n        nodeBG: cc.Node,\n        _boardPosition: [],\n        _boardUnitArgs: [],\n        _row: 4,\n        _col: 4,\n        _distance: 200,\n        _maxObj: 0,\n        _canPress: true,\n\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        Emiter.instance.addEvent('startGame', this._startGameFunc.bind(this));\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        this.instanceBackgroundUnit();\n        this._instanceBoardArray();\n    },\n\n    start() {\n    },\n\n    // update (dt) {},\n\n    onKeyDown: function (event) {\n        if (this._canPress == false) return;\n        this._canPress = false;\n        switch (event.keyCode) {\n            case cc.macro.KEY.up:\n                this._moveUp();\n                break;\n            case cc.macro.KEY.down:\n                this._moveDown();\n                break;\n            case cc.macro.KEY.left:\n                this._moveLeft();\n                break;\n            case cc.macro.KEY.right:\n                this._moveRight();\n                break;\n        }\n        //all even call this func -> need check keyinput!!!\n        if (event.keyCode == cc.macro.KEY.up || event.keyCode == cc.macro.KEY.down ||\n            event.keyCode == cc.macro.KEY.left || event.keyCode == cc.macro.KEY.right) {\n            cc.tween(this.node).delay(0.25).call(() => {\n                this.instanceRandomUnit();\n                this._canPress = true;\n            }).start();\n        }\n\n    },\n\n    instanceRandomUnit() {\n        this._maxObj++;\n        if (this._maxObj > (this._row * this._col)) {\n            cc.log('overGame');\n            this._maxObj--;\n            return;\n        }\n        let unit = cc.instantiate(this.unitPrefabs);\n        let randX = 0;\n        let randY = 0;\n        randomXY();\n        while (this._boardUnitArgs[randX][randY] != null) randomXY();\n        this._boardUnitArgs[randX][randY] = unit;\n        this.boardUnit.addChild(unit);\n        unit.position = this._boardPosition[randX][randY];\n        unit.setUnitValue(randomValue());\n        cc.log(this._boardUnitArgs, 'add unit, total ', this._maxObj)\n\n        function randomXY() {\n            randX = Math.floor(Math.random() * 4);\n            randY = Math.floor(Math.random() * 4);\n        }\n        function randomValue() {\n            let rand = Math.random();\n            rand > 0.75 ? rand = 4 : rand = 2;\n            return rand;\n        }\n    },\n\n    instanceBackgroundUnit() {\n        for (let i = 1; i <= this._row; i++) {\n            let rowBoard = [];\n            for (let j = 1; j <= this._col; j++) {\n                let unit = cc.instantiate(this.unitBG);\n                let unitPos = cc.v2(((j - (this._col + 1) / 2) * this._distance), -((i - (this._row + 1) / 2) * this._distance))\n                unit.position = unitPos;\n                rowBoard.push(unitPos);\n                this.nodeBG.addChild(unit);\n            }\n            this._boardPosition.push(rowBoard);\n        }\n    },\n\n    _startGameFunc() {\n        this._clearBoardGame();\n        this.instanceRandomUnit();\n        this.instanceRandomUnit();\n    },\n\n    _instanceBoardArray() {\n        for (let i = 0; i < this._row; i++) {\n            let rowBoardArg = [];\n            for (let j = 0; j < this._col; j++) rowBoardArg.push(null);\n            this._boardUnitArgs.push(rowBoardArg);\n        }\n    },\n\n    _clearBoardGame() {\n        for (let i = 0; i < this._row; i++) {\n            for (let j = 0; j < this._col; j++) {\n                if (this._boardUnitArgs[i][j] != null) this._boardUnitArgs[i][j].destroyNode();\n                this._boardUnitArgs[i][j] = null;\n            }\n        }\n        this._maxObj = 0;\n    },\n\n\n    _moveUp() {\n        for (let y = 0; y < this._col; y++) {\n            for (let x = 1; x < this._row; x++) {\n                if (this._boardUnitArgs[x][y] == null) continue;\n                if (this._boardUnitArgs[0][y] == null) {\n                    this._moveUnitPosition(x, y, 0, y);\n                    continue;\n                }\n                let index = 0;\n                for (let i = 0; i < x; i++) if (this._boardUnitArgs[i][y] != null) index = i + 1;\n                if (this._boardUnitArgs[index][y] == null) this._moveUnitPosition(x, y, index, y);\n            }\n        }\n    },\n\n    _moveDown() {\n        for (let y = this._col - 1; y >= 0; y--) {\n            for (let x = this._row - 2; x >= 0; x--) {\n                if (this._boardUnitArgs[x][y] == null) continue;\n                if (this._boardUnitArgs[this._row - 1][y] == null) {\n                    this._moveUnitPosition(x, y, this._row - 1, y);\n                    continue;\n                }\n                let index = this._row - 1;\n                for (let i = this._row - 1; i > x; i--) if (this._boardUnitArgs[i][y] != null) index = i - 1;\n                if (this._boardUnitArgs[index][y] == null) this._moveUnitPosition(x, y, index, y);\n            }\n        }\n    },\n\n    _moveLeft() {\n        for (let x = 0; x < this._row; x++) {\n            for (let y = 1; y < this._col; y++) {\n                if (this._boardUnitArgs[x][y] == null) continue;\n                if (this._boardUnitArgs[x][0] == null) {\n                    this._moveUnitPosition(x, y, x, 0);\n                    continue;\n                }\n                let index = 0;\n                for (let i = 0; i < y; i++) if (this._boardUnitArgs[x][i] != null) index = i + 1;\n                if (this._boardUnitArgs[x][index] == null) {\n                    this._moveUnitPosition(x, y, x, index);\n                    this._crossUnit(x, index, 'left');\n                    continue;\n                } else if (this._boardUnitArgs[x][y].getUnitValue() == this._boardUnitArgs[x][y - 1].getUnitValue()) {\n                    this._moveUnitPosition(x, y, x, index);\n                    this._crossUnit(x, index, 'left');\n                }\n\n                //this._crossUnit(x, index, 'left');\n            }\n        }\n    },\n\n    _moveRight() {\n        for (let x = this._row - 1; x >= 0; x--) {\n            for (let y = this._col - 2; y >= 0; y--) {\n                if (this._boardUnitArgs[x][y] == null) continue;\n                if (this._boardUnitArgs[x][this._col - 1] == null) {\n                    this._moveUnitPosition(x, y, x, this._col - 1);\n                    continue;\n                }\n                let index = this._col - 1;\n                for (let i = this._col - 1; i > y; i--) if (this._boardUnitArgs[x][i] != null) index = i - 1;\n                if (this._boardUnitArgs[x][index] == null) this._moveUnitPosition(x, y, x, index);\n            }\n        }\n    },\n\n\n    _moveUnitPosition(x, y, indexX, indexY) {\n        let temp = this._boardUnitArgs[x][y];\n        this._boardUnitArgs[x][y] = this._boardUnitArgs[indexX][indexY];\n        this._boardUnitArgs[indexX][indexY] = temp;\n        this._boardUnitArgs[indexX][indexY].moveUnit(this._boardPosition[indexX][indexY]);\n    },\n    _crossUnit(x, y, direct) {\n        cc.log(x, y);\n        //if (this._boardUnitArgs[x][y] == null || this._boardUnitArgs[x][y - 1]) return;\n        if (direct == 'up') {\n            if (this._boardUnitArgs[x][y].getUnitValue() == this._boardUnitArgs[x - 1][y].getUnitValue()) return true;\n        }\n        if (direct == 'down') {\n            if (this._boardUnitArgs[x][y].getUnitValue() == this._boardUnitArgs[x - 1][y].getUnitValue()) return true;\n        }\n        if (direct == 'left') {\n            if (this._boardUnitArgs[x][y].getUnitValue() == this._boardUnitArgs[x][y - 1].getUnitValue()) {\n                this._boardUnitArgs[x][y].destroyNode();\n                this._boardUnitArgs[x][y] = null;\n                this._boardUnitArgs[x][y - 1].setUnitValue(this._boardUnitArgs[x][y - 1].getUnitValue() * 2);\n                this._maxObj--;\n            }\n        }\n        if (direct == 'right') {\n            if (this._boardUnitArgs[x][y].getUnitValue() == this._boardUnitArgs[x - 1][y].getUnitValue()) return true;\n        }\n    }\n});\n"]}