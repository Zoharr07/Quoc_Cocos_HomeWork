{"version":3,"sources":["LosePopupController.js"],"names":["Emiter","require","cc","Class","extends","Component","properties","scoreLable","Label","playerNameLable","backGameplayBtn","Button","scoreUnit","Prefab","leaderBoardScrollView","ScrollView","_onPopup","_playerName","_score","onLoad","instance","addEvent","_turnOnPopup","bind","_turnOffPopup","_setPlayerName","node","on","_newGameBtn","score","emit","string","_move","_addPlayerScoreUnit","x","y","nodeObj","time","isActive","indx","t","tween","parallel","to","position","v2","easing","opacity","start","name","unitScore","instantiate","log","getChildByName","getComponent","content","addChild"],"mappings":"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","file":"LosePopupController.js","sourceRoot":"../../../../../assets/Script/Controller","sourcesContent":["const Emiter = require('Emitter');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        scoreLable: cc.Label,\n        playerNameLable: cc.Label,\n        backGameplayBtn: cc.Button,\n        scoreUnit: cc.Prefab,\n        leaderBoardScrollView: cc.ScrollView,\n        _onPopup: false,\n        _playerName: '',\n        _score: 0,\n    },\n\n    onLoad() {\n        Emiter.instance.addEvent('loseGame', this._turnOnPopup.bind(this));\n        Emiter.instance.addEvent('turnOffPopup', this._turnOffPopup.bind(this));\n        Emiter.instance.addEvent('setPlayerName', this._setPlayerName.bind(this));\n        this.backGameplayBtn.node.on('click', this._newGameBtn, this);\n    },\n\n    _turnOnPopup(score) {\n        if (this._onPopup) return;\n        this._onPopup = true;\n        Emiter.instance.emit('canInput', false);\n        this.scoreLable.string = score;\n        this._score = score;\n        this._move(0, 0, this.node, 0.6, true);\n        this._addPlayerScoreUnit();\n    },\n\n    _turnOffPopup() {\n        this._move(0, 1600, this.node, 0.6, false);\n        this._onPopup = false;\n    },\n\n    _newGameBtn() {\n        this._turnOffPopup();\n        Emiter.instance.emit('startGame');\n    },\n\n    _move(x, y, nodeObj, time, isActive) {\n\n        let indx = 0;\n        if (isActive == true) indx = 255;\n        let t = cc.tween;\n        t(nodeObj)\n            .parallel(\n                t().to(time, { position: cc.v2(x, y) }, { easing: 'quartOut' }),\n                t().to(time / 5, { opacity: indx }),\n            )\n            .start();\n    },\n\n    _setPlayerName(name) {\n        this._playerName = name;\n        this.playerNameLable.string = name;\n    },\n\n    _addPlayerScoreUnit() {\n        let unitScore = cc.instantiate(this.scoreUnit);\n        cc.log(this._playerName, this._score);\n        // unitScore.setNameData(this._playerName);\n        //cc.log(unitScore);\n        unitScore.getChildByName('PlayerName').getComponent(cc.Label).string = this._playerName;\n        unitScore.getChildByName('Total Score').getComponent(cc.Label).string = this._score;\n        this.leaderBoardScrollView.content.addChild(unitScore);\n        Emiter.instance.emit('addScoreData', unitScore);\n\n    }\n});\n"]}