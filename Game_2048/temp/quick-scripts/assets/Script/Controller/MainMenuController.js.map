{"version":3,"sources":["MainMenuController.js"],"names":["Emiter","require","cc","Class","extends","Component","properties","newGameBtn","Button","startGameBtn","replaySprite","Node","backMenuBtn","exitBtn","gamePlayNode","menuNode","leaderBoardNode","hightScoreBtn","backMenuLeaderboardBtn","playerNameInput","EditBox","soundMusicBtn","soundMusicOffSprite","_musicOn","soundEffectBtn","soundEffectOffSprite","_soundOn","onLoad","node","on","_newGameFunc","_startGameFunc","_backMenuFunc","_exitGame","_hightScoreFunc","_setSound","_setEffectSound","_initStart","active","_loadPlayerName","instance","emit","_savePlayerName","string","_move","x","y","nodeObj","time","isActive","indx","t","tween","call","parallel","to","position","v2","easing","opacity","start","game","end","sys","localStorage","setItem","getItem"],"mappings":"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","file":"MainMenuController.js","sourceRoot":"../../../../../assets/Script/Controller","sourcesContent":["const Emiter = require('Emitter');\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        newGameBtn: cc.Button,\n        startGameBtn: cc.Button,\n        replaySprite: cc.Node,\n        backMenuBtn: cc.Button,\n        exitBtn: cc.Button,\n        gamePlayNode: cc.Node,\n        menuNode: cc.Node,\n\n        leaderBoardNode: cc.Node,\n        hightScoreBtn: cc.Button,\n        backMenuLeaderboardBtn: cc.Button,\n\n        playerNameInput: cc.EditBox,\n\n        soundMusicBtn: cc.Button,\n        soundMusicOffSprite: cc.Node,\n        _musicOn: true,\n\n        soundEffectBtn: cc.Button,\n        soundEffectOffSprite: cc.Node,\n\n        _soundOn: true,\n    },\n\n    onLoad() {\n        this.newGameBtn.node.on('click', this._newGameFunc, this);\n        this.startGameBtn.node.on('click', this._startGameFunc, this);\n        this.backMenuBtn.node.on('click', this._backMenuFunc, this);\n        this.exitBtn.node.on('click', this._exitGame, this);\n\n        this.hightScoreBtn.node.on('click', this._hightScoreFunc, this);\n        this.backMenuLeaderboardBtn.node.on('click', this._backMenuFunc, this);\n\n        this.soundMusicBtn.node.on('click', this._setSound, this);\n        this.soundEffectBtn.node.on('click', this._setEffectSound, this);\n\n        this._initStart();\n    },\n\n    _initStart() {\n        this.gamePlayNode.active = false;\n        this.menuNode.active = true;\n        this.leaderBoardNode.active = false;\n        this._backMenuFunc();\n        this._loadPlayerName();\n    },\n\n    _newGameFunc() {\n        Emiter.instance.emit('playSoundClick');\n        Emiter.instance.emit('canInput', true);\n        this._savePlayerName();\n        Emiter.instance.emit('setPlayerName', this.playerNameInput.string);\n        this._move(-1000, 0, this.menuNode, 0.6, false);\n        this._move(0, 0, this.gamePlayNode, 0.6, true);\n    },\n\n    _hightScoreFunc() {\n        Emiter.instance.emit('playSoundClick');\n        Emiter.instance.emit('canInput', false);\n        this._move(1000, 0, this.menuNode, 0.6, false);\n        this._move(0, 0, this.leaderBoardNode, 0.6, true);\n    },\n\n    _backMenuFunc() {\n        Emiter.instance.emit('playSoundClick');\n        Emiter.instance.emit('turnOffPopup');\n        Emiter.instance.emit('canInput', false);\n        this._move(0, 0, this.menuNode, 0.6, true);\n        this._move(1000, 0, this.gamePlayNode, 0.6, false);\n        this._move(-1000, 0, this.leaderBoardNode, 0.6, false);\n    },\n\n    _move(x, y, nodeObj, time, isActive) {\n\n        let indx = 0;\n        if (isActive == true) indx = 255;\n        let t = cc.tween;\n        t(nodeObj)\n            .call(() => {\n                if (isActive == true) nodeObj.active = isActive;\n            })\n            .parallel(\n                t().to(time, { position: cc.v2(x, y) }, { easing: 'quartOut' }),\n                t().to(time / 5, { opacity: indx }),\n            )\n            .call(() => {\n                if (isActive == false) nodeObj.active = isActive;\n            })\n            .start();\n    },\n\n    _exitGame() {\n        cc.game.end();\n    },\n\n    _startGameFunc() {\n        Emiter.instance.emit('startGame');\n        Emiter.instance.emit('turnOffPopup');\n        Emiter.instance.emit('canInput', true);\n        this.replaySprite.active = true;\n    },\n\n    _setSound() {\n        if (this._musicOn) {\n            this._musicOn = false;\n            this.soundMusicOffSprite.active = true;\n            Emiter.instance.emit('turnMusic', false);\n            return;\n        }\n        this._musicOn = true;\n        this.soundMusicOffSprite.active = false;\n        Emiter.instance.emit('turnMusic', true);\n    },\n\n    _setEffectSound() {\n        if (this._musicOn) {\n            this._musicOn = false;\n            this.soundEffectOffSprite.active = true;\n            Emiter.instance.emit('turnEffectSound', false);\n            return;\n        }\n        this._musicOn = true;\n        this.soundEffectOffSprite.active = false;\n        Emiter.instance.emit('turnEffectSound', true);\n    },\n\n    _savePlayerName() {\n        if (this.playerNameInput.string != null) cc.sys.localStorage.setItem('PlayerName', this.playerNameInput.string);\n    },\n\n    _loadPlayerName() {\n        if (cc.sys.localStorage.getItem('PlayerName')) {\n            this.playerNameInput.string = cc.sys.localStorage.getItem('PlayerName');\n        } else this.playerNameInput.string = 'Player';\n    },\n\n});\n"]}