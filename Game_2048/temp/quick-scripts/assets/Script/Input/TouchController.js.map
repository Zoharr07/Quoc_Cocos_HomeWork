{"version":3,"sources":["TouchController.js"],"names":["Emiter","require","cc","Class","extends","Component","properties","_starPos","_endPos","onLoad","node","on","Node","EventType","TOUCH_START","onTouchStart","TOUCH_END","onTouchEnd","event","getLocation","_checkDirect","distance","moveX","x","moveY","y","Math","abs","instance","emit"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,SAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,kBAAU,IADF;AAERC,iBAAS;AAFD,KAFP;;AAOLC,UAPK,oBAOI;AACL,aAAKC,IAAL,CAAUC,EAAV,CAAaT,GAAGU,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,YAAjD,EAA+D,IAA/D,EAAqE,IAArE;AACA,aAAKL,IAAL,CAAUC,EAAV,CAAaT,GAAGU,IAAH,CAAQC,SAAR,CAAkBG,SAA/B,EAA0C,KAAKC,UAA/C,EAA2D,IAA3D,EAAiE,IAAjE;AACH,KAVI;;;AAYLF,kBAAc,sBAAUG,KAAV,EAAiB;AAC3B,aAAKX,QAAL,GAAgBW,MAAMC,WAAN,EAAhB;AACH,KAdI;;AAgBLF,gBAAY,oBAAUC,KAAV,EAAiB;AACzB,aAAKV,OAAL,GAAeU,MAAMC,WAAN,EAAf;AACA,aAAKC,YAAL;AACH,KAnBI;;AAqBLA,gBArBK,0BAqBU;AACX,YAAIC,WAAW,EAAf;AACA,YAAIC,QAAQ,KAAKd,OAAL,CAAae,CAAb,GAAiB,KAAKhB,QAAL,CAAcgB,CAA3C;AACA,YAAIC,QAAQ,KAAKhB,OAAL,CAAaiB,CAAb,GAAiB,KAAKlB,QAAL,CAAckB,CAA3C;AACA,YAAIC,KAAKC,GAAL,CAASL,KAAT,IAAkBI,KAAKC,GAAL,CAASH,KAAT,CAAtB,EAAuC;AACnC,gBAAIF,QAAQD,QAAR,IAAoBC,QAAQ,CAACD,QAAjC,EAA2C;AAC3C,gBAAIC,QAAQ,CAAZ,EAAetB,OAAO4B,QAAP,CAAgBC,IAAhB,CAAqB,WAArB,EAAf,KACK7B,OAAO4B,QAAP,CAAgBC,IAAhB,CAAqB,UAArB;AACR,SAJD,MAIO;AACH,gBAAIL,QAAQH,QAAR,IAAoBG,QAAQ,CAACH,QAAjC,EAA2C;AAC3C,gBAAIG,QAAQ,CAAZ,EAAexB,OAAO4B,QAAP,CAAgBC,IAAhB,CAAqB,QAArB,EAAf,KACK7B,OAAO4B,QAAP,CAAgBC,IAAhB,CAAqB,UAArB;AACR;AACJ;AAlCI,CAAT","file":"TouchController.js","sourceRoot":"../../../../../assets/Script/Input","sourcesContent":["const Emiter = require('Emitter');\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _starPos: null,\n        _endPos: null,\n    },\n\n    onLoad() {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this, true);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this, true);\n    },\n\n    onTouchStart: function (event) {\n        this._starPos = event.getLocation();\n    },\n\n    onTouchEnd: function (event) {\n        this._endPos = event.getLocation();\n        this._checkDirect();\n    },\n\n    _checkDirect() {\n        let distance = 30;\n        let moveX = this._endPos.x - this._starPos.x;\n        let moveY = this._endPos.y - this._starPos.y;\n        if (Math.abs(moveX) > Math.abs(moveY)) {\n            if (moveX < distance && moveX > -distance) return;\n            if (moveX > 0) Emiter.instance.emit('moveRight');\n            else Emiter.instance.emit('moveLeft');\n        } else {\n            if (moveY < distance && moveY > -distance) return;\n            if (moveY > 0) Emiter.instance.emit('moveUp');\n            else Emiter.instance.emit('moveDown');\n        }\n    }\n});\n"]}