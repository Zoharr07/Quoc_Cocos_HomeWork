{"version":3,"sources":["../../../../../assets/Script/Input/assets/Script/Input/TouchController.js"],"names":["Emiter","require","cc","Class","extends","Component","properties","_canInputTouch","_starPos","_distance","onLoad","node","on","Node","EventType","TOUCH_START","onTouchStart","TOUCH_END","onTouchEnd","instance","addEvent","_setInputTouch","bind","event","getLocation","moveX","getLocationX","x","moveY","getLocationY","y","Math","abs","emit","_checkDirect","status"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,SAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,wBAAgB,IADR;AAERC,kBAAU,IAFF;AAGRC,mBAAW;AAHH,KAFP;;AAQLC,UARK,oBAQI;AACL,aAAKC,IAAL,CAAUC,EAAV,CAAaV,GAAGW,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,YAAjD,EAA+D,IAA/D,EAAqE,IAArE;AACA,aAAKL,IAAL,CAAUC,EAAV,CAAaV,GAAGW,IAAH,CAAQC,SAAR,CAAkBG,SAA/B,EAA0C,KAAKC,UAA/C,EAA2D,IAA3D,EAAiE,IAAjE;;AAEAlB,eAAOmB,QAAP,CAAgBC,QAAhB,CAAyB,YAAzB,EAAuC,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAvC;AACA,aAAKD,cAAL,CAAoB,KAApB;AACH,KAdI;;;AAgBLL,kBAAc,sBAAUO,KAAV,EAAiB;AAC3B,aAAKf,QAAL,GAAgBe,MAAMC,WAAN,EAAhB;AACH,KAlBI;;AAoBLN,gBAAY,oBAAUK,KAAV,EAAiB;AACzB,YAAI,KAAKhB,cAAL,IAAuB,KAA3B,EAAkC;AAClC,YAAIkB,QAAQF,MAAMG,YAAN,KAAuB,KAAKlB,QAAL,CAAcmB,CAAjD;AACA,YAAIC,QAAQL,MAAMM,YAAN,KAAuB,KAAKrB,QAAL,CAAcsB,CAAjD;AACA,YAAIC,KAAKC,GAAL,CAASP,KAAT,IAAkBM,KAAKC,GAAL,CAASJ,KAAT,CAAtB,EAAuC;AACnC,gBAAIH,QAAQ,KAAKhB,SAAb,IAA0BgB,QAAQ,CAAC,KAAKhB,SAA5C,EAAuD;AACvD,gBAAIgB,QAAQ,CAAZ,EAAe;AACXzB,uBAAOmB,QAAP,CAAgBc,IAAhB,CAAqB,WAArB;AACA;AACH;AACDjC,mBAAOmB,QAAP,CAAgBc,IAAhB,CAAqB,UAArB;AACH,SAPD,MAOO;AACH,gBAAIL,QAAQ,KAAKnB,SAAb,IAA0BmB,QAAQ,CAAC,KAAKnB,SAA5C,EAAuD;AACvD,gBAAImB,QAAQ,CAAZ,EAAe;AACX5B,uBAAOmB,QAAP,CAAgBc,IAAhB,CAAqB,QAArB;AACA;AACH;AACDjC,mBAAOmB,QAAP,CAAgBc,IAAhB,CAAqB,UAArB;AACH;AACJ,KAvCI;;AAyCLC,gBAzCK,0BAyCU,CAEd,CA3CI;AA6CLb,kBA7CK,0BA6CUc,MA7CV,EA6CkB;AACnB,aAAK5B,cAAL,GAAsB4B,MAAtB;AACH;AA/CI,CAAT","file":"TouchController.js","sourceRoot":"../../../../../assets/Script/Input","sourcesContent":["const Emiter = require('Emitter');\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _canInputTouch: true,\n        _starPos: null,\n        _distance: 20,\n    },\n\n    onLoad() {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this, true);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this, true);\n\n        Emiter.instance.addEvent('inputTouch', this._setInputTouch.bind(this));\n        this._setInputTouch(false);\n    },\n\n    onTouchStart: function (event) {\n        this._starPos = event.getLocation();\n    },\n\n    onTouchEnd: function (event) {\n        if (this._canInputTouch == false) return;\n        let moveX = event.getLocationX() - this._starPos.x;\n        let moveY = event.getLocationY() - this._starPos.y;\n        if (Math.abs(moveX) > Math.abs(moveY)) {\n            if (moveX < this._distance && moveX > -this._distance) return;\n            if (moveX > 0) {\n                Emiter.instance.emit('moveRight');\n                return;\n            }\n            Emiter.instance.emit('moveLeft');\n        } else {\n            if (moveY < this._distance && moveY > -this._distance) return;\n            if (moveY > 0) {\n                Emiter.instance.emit('moveUp');\n                return;\n            }\n            Emiter.instance.emit('moveDown');\n        }\n    },\n\n    _checkDirect() {\n\n    },\n\n    _setInputTouch(status) {\n        this._canInputTouch = status;\n    },\n});\n"]}