{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/CharController.js"],"names":["Emiter","require","cc","Class","extends","Component","properties","char","Node","spAnim","sp","Skeleton","onLoad","instance","addEvent","_goLeft","bind","_goRight","_jumpChar","_resetChar","setEventListener","entry","event","data","log","name","setMix","scaleX","goLeft","moveBy","easing","easeQuarticActionOut","setAnimation","runAction","addAnimation","goRight","jump","jumpBy","easeInOut","position","v2","emit"],"mappings":"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","file":"CharController.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emiter = require('Emitter');\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        char: cc.Node,\n        spAnim: sp.Skeleton,\n    },\n\n    onLoad() {\n        Emiter.instance = new Emiter();\n        Emiter.instance.addEvent(\"goleft\", this._goLeft.bind(this));\n        Emiter.instance.addEvent(\"goright\", this._goRight.bind(this));\n        Emiter.instance.addEvent(\"jump\", this._jumpChar.bind(this));\n        Emiter.instance.addEvent(\"reset\", this._resetChar.bind(this));\n        this.spAnim.setEventListener((entry, event) => {\n            const { data } = event;\n            cc.log(data.name);\n        });\n        this.spAnim.setMix('jump', 'idle', 0.2);\n    },\n\n\n    _goLeft() {\n        if (this.char.scaleX == 1) this.char.scaleX = -1;\n        let goLeft = cc.moveBy(3, -120, 0);\n        goLeft.easing(cc.easeQuarticActionOut(2.0));\n\n        this.spAnim.setAnimation(0, 'walk', false);\n        this.char.runAction(goLeft);\n        this.spAnim.addAnimation(0, 'idle', true);\n    },\n\n    _goRight() {\n        if (this.char.scaleX == -1) this.char.scaleX = 1;\n        let goRight = cc.moveBy(3, 120, 0);\n        goRight.easing(cc.easeQuarticActionOut(2.5));\n\n        this.spAnim.setAnimation(0, 'walk', false);\n\n        this.char.runAction(goRight);\n        this.spAnim.addAnimation(0, 'idle', true);\n    },\n\n    _jumpChar() {\n        let jump = cc.jumpBy(1, 50 * this.char.scaleX, 0, 10, 1);\n        jump.easing(cc.easeInOut(1));\n\n        this.spAnim.setAnimation(0, 'jump', false);\n\n        this.char.runAction(jump);\n        this.spAnim.addAnimation(0, 'idle', true);\n    },\n\n    _resetChar() {\n        this.char.position = cc.v2(455, 160);\n        Emiter.instance.emit('setbutton', true);\n    },\n});\n"]}